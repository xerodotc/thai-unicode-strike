<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
		<title>Unicode strikethrough text generator</title>
		<style type="text/css">
		.header {
			font-weight: bold;
		}
		
		.big {
			font-weight: bold;
			font-size: 24px;
		}
		
		.sub {
			font-style: italic;
			font-size: 10px;
		}
		
		body {
			margin-left: 50px;
		}
		</style>
		<script type="text/javascript" src="jquery-1.10.2.min.js"></script>
		<script type="text/javascript">
		function strikethrough(text)
		{
			var floating_vowels = new Array('ู', 'ุ', 'ึ', 'ํ', 'ั', 'ี', '๊', '้', '็', '่', '๋', 'ฺ', 'ิ', '์', 'ื', 'ำ');
			var no_strikethrough = new Array('\n');
			var break_vowels_from = new Array('ำ');
			var break_vowels_to = new Array(new Array('ํ', 'า'));
		
			var stext = "";
			var break_i;
			
			for (i = 0; i < text.length; i++)
			{
				if (no_strikethrough.indexOf(text[i]) >= 0)
				{
					stext += text[i];
					continue;
				}
				
				if (i < (text.length-1))
				{
					if (break_vowels_from.indexOf(text[i]) >= 0)
					{
						break_i = break_vowels_from.indexOf(text[i]);
						stext += break_vowels_to[break_i][0] + '\u0336' + break_vowels_to[break_i][1];
					}
					else if (break_vowels_from.indexOf(text[i+1]) >= 0)
					{
						break_i = break_vowels_from.indexOf(text[i+1]);
						if (floating_vowels.indexOf(text[i]) >= 0)
						{
							stext += break_vowels_to[break_i][0] + text[i] + '\u0336' + break_vowels_to[break_i][1];
						}
						else
						{
							stext += text[i] + break_vowels_to[break_i][0] + '\u0336' + break_vowels_to[break_i][1];
						}
						
						i++;
					}
					else
					{
						stext += text[i];
					}
				
					// Lookahead
					if (i < (text.length-1))
					{
						if (floating_vowels.indexOf(text[i+1]) < 0)
						{
							stext += '\u0336';
						}
					}
					else
					{
						stext += '\u0336';
					}
				}
				else
				{
					if (break_vowels_from.indexOf(text[i]) >= 0)
					{
						break_i = break_vowels_from.indexOf(text[i]);
						stext += break_vowels_to[break_i][0] + '\u0336' + break_vowels_to[break_i][1];
					}
					else
					{
						stext += text[i];
					}
					
					stext += '\u0336';
				}
			}
			
			return stext;
		}
		
		$(function() {
			$('#generate').click(function() {
				$('#output').val(strikethrough($('#input').val()));
			});
			
			$('#tweet').click(function() {
				window.open('https://twitter.com/intent/tweet?text=' + $('#output').val(), 'twitter');
			});
		});
		</script>
	</head>
	<body>
		<p><span class="big">Unicode strikethrough text generator</span><br><span class="sub">Compatible with Thai language</span></p>
		<table>
			<tr>
				<td class="header">Input</td>
				<td class="header">Output</td>
			</tr>
			<tr>
				<td><textarea id="input" rows="8" cols="50"></textarea></td>
				<td><textarea id="output" rows="8" cols="50" readonly></textarea></td>
			</tr>
			<tr>
				<td><button id="generate">Generate</button></td>
				<td><button id="tweet">Tweet this!</button></td>
			</tr>
		</table>
		<p class="sub">Inspired by <a href="http://adamvarga.com/strike/" target="_blank">http://adamvarga.com/strike/</a><br>Created by <a href="http://xerodotc.wordpress.com/" target="_blank">xerodotc</a></p>
	</body>
</html>